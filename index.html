<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <title>🌦️ OSAME–Rosnička</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    body {
      background-color: #f0f8ff;
      font-family: 'Segoe UI', sans-serif;
      color: #222;
      margin: 0;
      padding: 20px;
    }

    .box {
      margin: 20px 0;
      padding: 16px;
      border: 2px solid #00bfff;
      border-radius: 10px;
      background-color: #eef6ff;
      box-shadow: 0 0 8px rgba(0, 191, 255, 0.2);
    }

    h1, h2 {
      margin-top: 0;
    }

    #mapa-box {
      height: 400px;
      width: 100%;
    }

    @media (prefers-color-scheme: dark) {
      body {
        background-color: #111;
        color: #eee;
      }

      .box {
        background-color: #112233;
        border-color: #00bfff;
        color: #ccf;
        box-shadow: 0 0 8px rgba(0, 191, 255, 0.4);
      }
    }
  </style>
</head>
<body>

<h1>🌦️ OSAME–Rosnička: Orbitální výdechový panel</h1>

<!-- 🧭 Poloha -->
<div id="lokace-box" class="box">
  <h2>🧭 Poloha</h2>
  <div>Načítám lokaci...</div>
</div>

<!-- 🌡️ Počasí -->
<div id="pocasi-box" class="box">
  <h2>🌡️ Počasí</h2>
  <div>Načítám aktuální počasí...</div>
</div>

<!-- 📅 Předpověď -->
<div id="predpoved-box" class="box">
  <h2>📅 Předpověď</h2>
  <div>Načítám výhled počasí...</div>
</div>

<!-- 🧥 Oblečení -->
<div id="obleceni-box" class="box">
  <h2>🧥 Doporučené oblečení</h2>
  <div>Načítám výbavu na den...</div>
</div>

<!-- 🔮 Horoskop -->
<div id="horoskop-box" class="box">
  <h2>🔮 Horoskop</h2>
  <div>Načítám denní horoskop...</div>
</div>

<!-- 🌕 Astronomie -->
<div id="astro-box" class="box">
  <h2>🌕 Astronomická data</h2>
  <div>Načítám fáze, východy, západy...</div>
</div>

<!-- 🌍 Ekologie -->
<div id="eko-box" class="box">
  <h2>🌍 Ekologický dopad</h2>
  <div>Načítám environmentální data...</div>
</div>

<!-- ⚠️ Výstrahy -->
<div id="vystrhy-box" class="box">
  <h2>⚠️ Výstrahy</h2>
  <div>Načítám meteorologické výstrahy...</div>
</div>

<!-- 🌬️ Rozptylové podmínky -->
<div id="rozptyl-box" class="box">
  <h2>🌬️ Rozptylové podmínky</h2>
  <div>Načítám kvalitu ovzduší...</div>
</div>

<!-- 🌾 Pyly a prach -->
<div id="pyly-box" class="box">
  <h2>🌾 Pyly a prach</h2>
  <div>Načítám alergenní výdechy...</div>
</div>

<!-- 🔋 Energie znamení -->
<div id="energie-box" class="box">
  <h2>🔋 Energie znamení</h2>
  <div>Načítám astrologickou sílu...</div>
</div>

<!-- 🗺️ Mapa -->
<div id="mapa-box" class="box">
  <h2>🗺️ Mapa</h2>
  <div>Načítám mapu a směr pohledu...</div>
</div>

<!-- 📊 Vizualizace -->
<div id="vizualizace-box" class="box">
  <h2>📊 Vizualizace</h2>
  <div>Načítám vrstvy a jevy...</div>
</div>

<!-- 👨‍💻 Footer -->
<div id="footer-box" class="box">
  <p>👨‍💻 Vytvořil student s otevřeným zdrojovým kódem OS Aplet ME-AI s modulem OSAME–Rosnička</p>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script type="module">
  import { zjistiPolohu } from './modules/geo_detect.js';
  import { ziskejPocasi } from './modules/load_weather.js';
  import { ziskejPredpoved } from './modules/prediktor.js';
  import { doporucObleceni } from './modules/obleceni.js';
  import { vypocitejHoroskop } from './modules/horoskop.js';
  import { ziskejAstronomii } from './modules/astro_data.js';
  import { vypocetEkologickehoDopadu } from './modules/eco_impact.js';
  import { vykresliMapu } from './modules/mapa.js';
  import { ziskejVizualizaci } from './modules/visualizace.js';

  const { lat, lon, smer } = await zjistiPolohu();

  const pocasi = await ziskejPocasi(lat, lon);
  const predpoved = await ziskejPredpoved(lat, lon);
  const obleceni = doporucObleceni(pocasi);
  const horoskop = await vypocitejHoroskop();
  const astro = await ziskejAstronomii(lat, lon);
  const eko = await vypocetEkologickehoDopadu(pocasi);
  const vrstvy = await ziskejVizualizaci(lat, lon);

  document.getElementById("lokace-box").innerHTML = `
    <h2>🧭 Poloha</h2>
    <p>GPS: ${lat.toFixed(4)}, ${lon.toFixed(4)}</p>
  `;

  document.getElementById("pocasi-box").innerHTML = `
    <h2>🌡️ Počasí</h2>
    <p>Teplota: ${pocasi.teplota}°C</p>
    <p>Pociťová teplota: ${pocasi.pocitova}°C</p>
    <p>Minimální: ${pocasi.min}°C | Maximální: ${pocasi.max}°C</p>
    <p>Tlak: ${pocasi.tlak} hPa</p>
    <p>Vlhkost: ${pocasi.vlhkost} %</p>
    <p>Obloha: ${pocasi.popis} ${pocasi.ikona}</p>
  `;

  document.getElementById("predpoved-box").innerHTML = `
    <h2>📅 Předpověď</h2>
    <p>${predpoved}</p>
  `;

  document.getElementById("obleceni-box").innerHTML = `
    <h2>🧥 Doporučené oblečení</h2>
    <p>${obleceni}</p>
  `;

  document.getElementById("horoskop-box").innerHTML = `
    <h2>🔮 Horoskop</h2>
    <p>${horoskop}</p>
  `;

  document.getElementById("astro-box").innerHTML = `
    <h2>🌕 Astronomická data</h2>
    <p>Slunce: Východ ${astro.sunrise}, Západ ${astro.sunset}</p>
    <p>Měsíc: Fáze ${astro.moon_phase}</p>
    <p>Azimut: ${astro.azimut}°, Výška: ${astro.altitude}°</p>
    <p>Znamení: ${astro.znameni}</p>
  `;

  document.getElementById("eko-box").innerHTML = `
    <h2>🌍 Ekologický dopad</h2>
    <p>Index: ${eko.index}</p>
    <p>${eko.komentar}</p>
  `;

  vykresliMapu({ lat, lon, smer });

  document.getElementById("vizualizace-box").innerHTML = `
    <h2>📊 Vizualizace</h2>
    <p>Vrstva oblačnosti: ${vrstvy.clouds}</p>
    <p>Směr větru: ${vrstvy.wind_dir}°, Rychlost: ${vrstvy.wind_speed} m/s</p>
    <p>Výskyt jevů: ${vrstvy.extremes.join(', ')}</p>
  `;
</script>
</body>
</html>
